All the codes needed for aperture generation, not clean currently, just using as a back up
